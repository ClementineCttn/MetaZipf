The well-known regularity of Zipf’s law concerning city size distribution which was refined from Auerbach [1], has been widely investigated across countries and over time [2–4]. In the upper tail of city size distribution, a Pareto distribution could be a good approximation to the data; and, Zipf’s law appears when the shape parameter of the distribution is equal to one [6]. There are theoretical arguments that make us expect Zipf’s law (See Gabaix [8,9] and reference therein). Many papers estimate the Pareto exponent to test Zipf’s law. When the value of the Pareto exponent is not different from one, it is said that Zipf’s law holds; otherwise, Zipf’s law is rejected. Rosen and Resnick [3] find that the exponent in 32 out of 44 countries exceeded one with a sample mean of 1.14, which is close to 1. Using a new and larger cross-country dataset, Soo [4] rejects Zipf’s law for 53 out of 73 countries using ordinary least squares (OLS). Soo [4] finds an average Pareto exponent of 1.11, it is pretty close to Zipf’s law, though it is not exactly 1. Most previous investigations are restricted to log–log rank–size regression for a fixed sample. It rules out the probability of variation for the exponent by changing the sample size. Some authors including Black and Henderson [11], Eeckhout [5], Rosen and Resnick [3], and Song and Zhang [12] suggest that the value of the exponent is sensitive to the choice of sample size. However, there is no empirical paper that systematically investigates it. 
In this paper, we follow a different approach; by using rolling sample regression methods rather than fixed sample size, we find some deviations from Zipf’s law in Chinese city size data. The intuition is that if the distribution is Pareto with a coefficient one (Zipf’s law holds), rolling sample regressions should yield a constant coefficient independent of the sub-sample size for the rolling regressions. 
The Pareto distribution with shape parameter has the counter-cumulative distribution function: with the corresponding probability density function. The Pareto distribution is the only distribution that is invariant under truncation from below, which means that for the Pareto distribution, for. So the conditional distribution is also a Pareto distribution, with the same shape parameter and new location parameter S [9,13,14]. This remarkable property of the Pareto distribution means that the rolling rank regressions are regressions of the log transformation of this equation for decreasing values of S. If the distribution is Pareto, rolling sample regressions should yield a constant coefficient (which in the case of Zipf’s law is not different from one). 
There are two advantages of rolling sample regression methods. First, they can systematically uncover the variation pattern of the exponent coefficient with the variation of truncation point. Some empirical papers investigate the value of the exponent using cross-country data. If the number of cities is different, or the lower city size threshold varies, then a large variation of the value of the exponent for different countries is expected. Second, the rolling sample regression methods adapt to the fact that the research interest extends to the entire distribution from the upper tail of the distribution. The census data are no longer restricted to large cities; and the truncation point for city size data is decreasing significantly in some countries and will decrease dramatically in other countries. More and more cities are included in the dataset from the census. For instance, using Census 2000 data including places even with only one person, Eeckhout [5] shows that the entire size distribution is lognormal. 
We employ two complementary rolling sample regression methods. One method is rolling rank regressions in which the starting point of each sub-sample is fixed at the largest city and the truncation point moves down one city every time; so, the sub-sample size is increasing by one each time. The other method is rolling window regressions in which the size of each sub-sample of regression is fixed; that is, a fixed-width window with the start point and end point simultaneously moving down one city every time, i.e., the width of the window remains unchanged. 
We perform the analysis using OLS for two rolling sample regression methods. As shown by Gabaix and Ibragimov [17], the OLS approach is widely used in the Zipf regression because of ‘‘arguably the simplicity and robustness of this method’’. The improved OLS estimation proposed by Gabaix and Ibragimov [17] is adopted here. 
We find that the Pareto exponent is decreasing in the truncated point, except for the very upper tail of a full sample size of about 650 cities each year in 1999–2004 for the rolling rank regressions. Our estimates range from 0.799 (full sample in 2002) to 1.852 (the 100 largest cities sub-sample in 2002), with a sample mean of 0.84 for the full sample size. The results are not so far from Zipf’s law, although there are some deviations from the law. The variation pattern of the Pareto exponent is similar for the rolling window regressions except that there are some fluctuations in the lower half of the full sample size. 
Following the introduction, this paper is organized into the following three sections: Section 2 describes the data and the methods; Section 3 presents the results of Zipf’s law; Section 4 concludes the study. 
We study the validity of Zipf’s law using China’s recent city size data; it is very interesting because of its rapid urbanization with the largest population in the world. Although the Chinese urbanization percentage has been steadily increasing in recent years, a striking feature of China is the low proportion of the population (about 30%) which resides in cities compared to that of developed countries (for instance 80% in the United States in 2000 [19]). We use a data set of the Chinese city population from 1999 to 2004 obtained from the Chinese Urban Statistical Yearbooks (State Statistical Bureau, 2000–2005). The Chinese Urban Statistical Yearbooks report three administrative levels of cities including province-level, prefecture-level, and county-level. Song and Zhang [12] provide an excellent discussion about urbanization in China and the three levels of cities, they also estimates the Pareto exponent of Chinese cities for the years 1991 and 1998. There are two types of city population information in the Chinese Urban Statistical Yearbooks including: (1) Shiqu (urban) population, the population of an urban area; and, (2) Diqu population, the population of an urban area plus rural areas under the city’s jurisdiction. In China, a city is an urban area surrounded by rural areas. The structure of a city is just like a cell, with an urban area as the core of the cell. Rural areas are included in a city only because the rural places are under the city’s jurisdiction for administrative considerations. While the population of Diqu is the total population of a city consisting of the urban population and rural population, the population of Shiqu is the population concentrated in the urban area of a city. That is to say, Shiqu is closer to true agglomeration than Diqu. Many researchers, such as Refs. [3,4,10], consider that agglomeration would be a better definition as it typically includes surrounding suburbs where the workers of a city reside. However, as Au and Henderson [20] (and reference therein) describe that China strongly restricts rural–urban migration through the hukou system, which is similar to an internal passport system in China. In addition, most of the workers in China cannot afford their own cars and cannot reside in the surrounding suburbs with jobs in the urban area. Therefore, Shiqu (urban area of a city) more closely approximates an integrated economic unit in China. Thus we use the Shiqu population, where most of the people of a city reside, as do Anderson and Ge [21] and Song and Zhang [12]. Moura Jr. and Ribeiro [2] also exclude the rural population from their sample in the study of the Zipf law for cities in Brazil. 
Our sample period begins from 1999 to 2004 because before 1999, the Chinese Urban Statistical Yearbooks did not report data of county-level cities. Another point to consider is that during this period there were very few new cities entering the system. In addition, the final reason is to provide new evidence for Zipf’s law due to Soo [4], who assesses the empirical validity of Zipf’s law using a new cross-country dataset. Table 1 reports the descriptive statistics of the Chinese city size. The number of cities reported in the Chinese Urban Statistical Yearbooks ranges from a low of 592 in 2000 to a high of 664 in 2001. The minimum city size is from 9000 persons in 2003 to 16,000 persons in 2004. Furthermore, the largest city size rises from 11.3 million to 12.9 million—Shanghai, located in the Yangzi River delta in the east of China. The urbanization share has steadily increased from 25.5% to 31.8%; that is, approximately 93.9 million more persons living in cities during these years. 
Zipf’s law, also referred to as the rank size rule, is a deterministic rule that states that the population size S of a city in the decreasingly ordered sequence of n cities with their population is inversely proportional to the rank of the size of the city r. An OLS regression of the log rank r on the log size S(r) is a way to estimate the Pareto exponent
It is well known that OLS estimated coefficients and the standard errors are strongly biased downward in small samples [10]. Fortunately, there is a remedy for this problem provided by Ref. [17]. They show that a shift of 0.5 for the rank is optimal and could cancel the bias up to a leading order. Furthermore, the standard error on the Pareto exponent is 
equal to, where n is the corresponding sample size. Therefore, regression (1) becomes regression (2) below:
Two rolling sample regression methods are used in this paper, including rolling rank regressions and rolling window regressions. Using rolling rank regressions, we will repeat the estimation process using a diminishing lower truncation point, which is the starting point of each sub-sample that is the same and fixed at the largest city. Furthermore, the lower truncation point moves down by one city every time so that the sub-sample size increases by one each time. For example, the full sample size is 654 in 2004; these cities will be in descending order from the largest city, Shanghai, to the smallest city, Shaoshan (Hunan Province). The first sub-sample size of the regression (2) is, the 20 largest cities for instance. The second sub-sample is, the 21 largest cities. Next, the third is, or the 22 largest cities. This process continues until the last sub-sample is 654 cities, which is the full sample size. We will get estimated exponent coefficients of by repeating regressions 645 times with such a rolling rank regression method. 
The following describes the alternative rolling window regression method as: we repeat the OLS estimation of Eq. (2) with a constant sub-sample size (fixed-width window) rather than increasing the sample size as shown above. With the start point and end point moving down one city each time, the fixed-width window regressions would roll from the start point (the largest city) to the end point (the smallest city) of the full sample size. The width of the window we choose is 100, i.e., the sub-sample size of these regressions remains unchanged and equal to 100, which is similar to the average number (102) of cross-country cities in Soo [4]. For instance, in 2004 the first window (sub-sample) of the fixed-width regression is from the largest city (Shanghai) to the 100th largest city (Yongzhou, Hunan Province). The second window (sub-sample) of fixed-width regression is from the second largest city (Beijing, the capital of China) to the 101th largest city (Jining, Shandong Province), and so on. The last window (sub-sample) is the smallest 100 cities from Hejian (Hebei Province) to Shaoshan. There are windows (regressions) for the year of 2004 which has 654 cities. The rank of the top city in any sub-sample (or any regression window, whose width is constant and equal to 100 in the paper) is called rank 1 rather than its actual rank in the full sample, because every window is regarded as an independent regression due to the ‘‘remarkable property of the Pareto distribution’’ discussed in the Introduction. For instance, we call the first city in the 500th regression window, which has 100 cities from 500th to 599th in the full sample, rank 1 instead of rank 500. 
In order to compare the theoretical Zipf’s law to the empirical distribution, we provide a simple simulation. Take for instance a sample that is the 654 cities of the year 2004; we produce an exact rank size rule for 654 cities with the largest city being just the No.1 of 2004, which has a population of 12 891.3 thousand persons. That is, the simulation size series is 
We use two rolling sample regression methods described above for the simulation size series to demonstrate how the theoretical exponent will vary. 
We estimate Eq. (2) using the rolling rank regression method with the beginning sub-sample size of 20, an arbitrary start number for each year separately, and get and exponent coefficients respectively. The average value of the Pareto exponent for all regressions is about 1.3, while the average value of the Pareto exponent for the full sample is roughly 0.84. Actually, they are not so far from 1, which implies that Zipf’s law fits the size distribution of Chinese cities well, at least approximately. Table 2 reports the components of the results. When the estimated sub-sample is the top 100 cities, the value of the Pareto exponent is about 1.8. In addition, 2002 is the year with the largest value of the Pareto exponent with a value of 1.852, and, the lowest value of 1.781 is obtained for 2003. With the rolling sample size increasing, the estimated Pareto exponent decreases until the truncation point reaches the end of the full sample, where the value of the Pareto exponent is about 0.84 (with the largest value of 0.876 for 1999, the lowest value of 0.799 for 2002). Fig. 1 illustrates the relationship between the Pareto exponent with 95% confidence interval and the truncation point from the 20th largest city to the smallest city for each year. A first glance at the figure suggests that the Pareto exponent is negatively related to the sub-sample size. Actually, the value of the estimated is monotonically decreasing in the truncation point providing that the sub-sample size exceeds about 100. 
Standard errors (in parentheses) in Table 2 are corrected by the method in Ref. [17]. The statistical significance of the Pareto exponent shows that is significantly greater than one when the sub-sample size is less than 300; and, is significantly less than one when the sub-sample size is the full sample size. There are two ranges illustrated in Fig. 1 within the Pareto exponent in which is not significantly different from one at a 5% level. 
The last column of Table 2 clearly reveals the result for the simulation size series. As we expect, the Pareto exponent is not significantly different from one for every sub-sample size. The average value is 1.036. The estimates are almost constant unless the sub-sample is very small. This variation pattern confirms that when the distribution is Pareto, then the rolling regressions should yield a constant coefficient and that in the case of Zipf’s law should not be different from one. 
Fig. 2, following Krugman [22] and Gabaix [8], shows a plot of log rank against log population for the full sample size of each year and of simulation size series. The scatter plot that is apparently not in a line but concave, is in accordance with the fact that the Pareto exponent varies with the sub-sample size. The concave plot suggests that the large cities are too small and the small cities are underrepresented; Rossi-Hansberg and Wright [19] emphasize this cross-country general feature. Compared to the concave empirical plot of 1999–2004, the plot of simulation size series is a perfect line with a slope of negative one. That is, it reflects an exact rank size rule. 
In addition, our empirical distribution tests reject the hypothesis that the full sample size distribution is lognormal with the zero p-values for the adjusted statistics of the Lilliefors test and the Anderson–Darling test for each year. Gan et al. [24] reach the same results for the 1985 and the 1999 Chinese city size data. 
For the rolling window regressions for each year separately with the fixed-width window of 100, we get and exponent coefficients respectively. The decreasing variation pattern of the Pareto exponent is similar to the rolling rank regressions except that there are some fluctuations in the lower half of the full sample size. The average value of the exponent is about 0.75, which is much smaller than that (1.3) of rolling rank regressions. 
Table 3 reports the components of the results. The first regression window, where the estimated sub-sample is the top 100 cities, gives the same result as the rolling rank regressions when its truncation point is the 100th largest city. With the regression window rolling down, the estimated Pareto exponent decreases dramatically. The value of the exponent is already reaching one at the 100th regression window where the starting point of the window is the 100th largest city and the ending point is the 199th largest city. After that, there are some fluctuations of the exponent below one and then it dramatically decreases again until the last regression window, where the value of the Pareto exponent is only about 0.11 (the largest value of 0.126 for 2000; the lowest value of 0.093 for 2003). Fig. 3 illustrates the relationship between the Pareto exponent with a 95% confidence interval and regression windows for each year. The figure suggests that the Pareto exponent negatively relates to the location of regression windows as a whole. Except for one range the Pareto exponent is significantly different from one for every year. An exception is 1999, which has three such ranges. 
The rolling window regression result for the simulation size series is almost the same as the rolling rank regressions. The Pareto exponent differs insignificantly from one for every window and the confidence interval is almost parallel since the sub-sample size of every window regression is constant (see Fig. 3). The average value of the exponent is 1.003, the maximum is 1.059, and the minimum is 1.008. This variation pattern also confirms that when the distribution is Pareto then the rolling regressions should yield a constant coefficient; and, in the case of Zipf’s law, it should be one. That is to say, we should get the same result for whichever rolling sample regression method is used for an exact rank size rule. 
We also perform a non-parametric analysis for the distribution of the Pareto exponent for the rolling sample regressions to show a complete description of how the values of the Pareto exponent are distributed, as does Soo [4]. We construct the efficient Epanechnikov kernel function using the optimal window width for the Pareto exponent for both the rolling rank and rolling window regressions. Fig. 4 demonstrates the kernel function for the rolling rank regressions. The empirical distributions for 1999–2004 are bimodal with the left modes higher than the right modes. The left modes are around one while the right modes are about 1.7. Nevertheless, the distribution is clearly unimodal for the simulation size series with the mode at approximately 1.022. 
Fig. 5 shows the kernel function for the rolling window regressions. Now, the distributions are unimodal rather than bimodal. There are some fluctuations around the modes, which just reflect the fact that there are more fluctuations in the values of the Pareto exponent for the rolling window regressions. The kernel function for the rolling window regressions of the simulation size series is very similar to that of the rolling rank regressions. It is unimodal with the mode at approximately 1.013, which is slightly smaller than that of rolling rank regressions. If small sub-samples (from 20 to 100) are used for the rolling rank regressions, we observe a somewhat larger estimate of the exponent. Other than that, these two kernel functions for the Pareto exponent of the simulation size series are almost identical, which confirms that the distribution of the Pareto exponent should be similar for the two rolling regressions. 
Using rolling sample regression methods rather than fixed sample size, we study the empirical validity of Zipf’s Law for Chinese cities. The intuition is that if the distribution is Pareto with a coefficient one (Zipf’s law holds), rolling sample regressions should yield a constant coefficient not different from one. We employ the following two complementary rolling sample regression methods: (1) rolling rank regressions with the start point of each sub-sample fixed at the largest city and the truncation point moving down one city every time; and, (2) rolling window regressions with a fixed-width window rolling down from the largest city to the smallest city. We find that the Pareto exponent is almost monotonically decreasing in the truncated point for the rolling rank regressions; the mean estimated coefficient is 0.84 for the full dataset, which is not so far from 1. This implies that Zipf’s law fits the size distribution of Chinese cities well, at least approximately. The variation pattern of the Pareto exponent is similar for the rolling window regressions except that there are some fluctuations in the lower half of the full sample size. 


